

var schooltimes = new Array();
schooltimes["09/01/2025"] = false;
schooltimes["09/02/2025"] = true;
schooltimes["09/03/2025"] = true;
schooltimes["09/04/2025"] = true;
schooltimes["09/05/2025"] = true;
schooltimes["09/06/2025"] = false;
schooltimes["09/07/2025"] = false;
schooltimes["09/08/2025"] = true;
schooltimes["09/09/2025"] = true;
schooltimes["09/10/2025"] = true;
schooltimes["09/11/2025"] = true;
schooltimes["09/12/2025"] = true;
schooltimes["09/13/2025"] = false;
schooltimes["09/14/2025"] = false;
schooltimes["09/15/2025"] = true;
schooltimes["09/16/2025"] = true;
schooltimes["09/17/2025"] = true;
schooltimes["09/18/2025"] = true;
schooltimes["09/19/2025"] = true;
schooltimes["09/20/2025"] = false;
schooltimes["09/21/2025"] = false;
schooltimes["09/22/2025"] = true;
schooltimes["09/23/2025"] = true;
schooltimes["09/24/2025"] = true;
schooltimes["09/25/2025"] = true;
schooltimes["09/26/2025"] = true;
schooltimes["09/27/2025"] = false;
schooltimes["09/28/2025"] = false;
schooltimes["09/29/2025"] = true;
schooltimes["09/30/2025"] = true;

schooltimes["10/01/2025"] = true;
schooltimes["10/02/2025"] = true;
schooltimes["10/03/2025"] = true;
schooltimes["10/04/2025"] = false;
schooltimes["10/05/2025"] = false;
schooltimes["10/06/2025"] = true;
schooltimes["10/07/2025"] = true;
schooltimes["10/08/2025"] = true;
schooltimes["10/09/2025"] = true;
schooltimes["10/10/2025"] = true;
schooltimes["10/11/2025"] = false;
schooltimes["10/12/2025"] = false;
schooltimes["10/13/2025"] = false;
schooltimes["10/14/2025"] = true;
schooltimes["10/15/2025"] = true;
schooltimes["10/16/2025"] = true;
schooltimes["10/17/2025"] = true;
schooltimes["10/18/2025"] = false;
schooltimes["10/19/2025"] = false;
schooltimes["10/20/2025"] = true;
schooltimes["10/21/2025"] = true;
schooltimes["10/22/2025"] = true;
schooltimes["10/23/2025"] = true;
schooltimes["10/24/2025"] = true;
schooltimes["10/25/2025"] = false;
schooltimes["10/26/2025"] = false;
schooltimes["10/27/2025"] = true;
schooltimes["10/28/2025"] = true;
schooltimes["10/29/2025"] = true;
schooltimes["10/30/2025"] = true;
schooltimes["10/31/2025"] = true;

schooltimes["11/01/2025"] = false;
schooltimes["11/02/2025"] = false;
schooltimes["11/03/2025"] = true;
schooltimes["11/04/2025"] = false;
schooltimes["11/05/2025"] = true;
schooltimes["11/06/2025"] = true;
schooltimes["11/07/2025"] = true;
schooltimes["11/08/2025"] = false;
schooltimes["11/09/2025"] = false;
schooltimes["11/10/2025"] = true;
schooltimes["11/11/2025"] = false;
schooltimes["11/12/2025"] = true;
schooltimes["11/13/2025"] = true;
schooltimes["11/14/2025"] = true;
schooltimes["11/15/2025"] = false;
schooltimes["11/16/2025"] = false;
schooltimes["11/17/2025"] = true;
schooltimes["11/18/2025"] = true;
schooltimes["11/19/2025"] = true;
schooltimes["11/20/2025"] = true;
schooltimes["11/21/2025"] = true;
schooltimes["11/22/2025"] = false;
schooltimes["11/23/2025"] = false;
schooltimes["11/24/2025"] = true;
schooltimes["11/25/2025"] = true;
schooltimes["11/26/2025"] = false;
schooltimes["11/27/2025"] = false;
schooltimes["11/28/2025"] = false;
schooltimes["11/29/2025"] = false;
schooltimes["11/30/2025"] = false;

schooltimes["12/01/2025"] = true;
schooltimes["12/02/2025"] = true;
schooltimes["12/03/2025"] = true;
schooltimes["12/04/2025"] = true;
schooltimes["12/05/2025"] = true;
schooltimes["12/06/2025"] = false;
schooltimes["12/07/2025"] = false;
schooltimes["12/08/2025"] = true;
schooltimes["12/09/2025"] = true;
schooltimes["12/10/2025"] = true;
schooltimes["12/11/2025"] = true;
schooltimes["12/12/2025"] = true;
schooltimes["12/13/2025"] = false;
schooltimes["12/14/2025"] = false;
schooltimes["12/15/2025"] = true;
schooltimes["12/16/2025"] = true;
schooltimes["12/17/2025"] = true;
schooltimes["12/18/2025"] = true;
schooltimes["12/19/2025"] = true;
schooltimes["12/20/2025"] = false;
schooltimes["12/21/2025"] = false;
schooltimes["12/22/2025"] = true;
schooltimes["12/23/2025"] = true;
schooltimes["12/24/2025"] = false;
schooltimes["12/25/2025"] = false;
schooltimes["12/26/2025"] = false;
schooltimes["12/27/2025"] = false;
schooltimes["12/28/2025"] = false;
schooltimes["12/29/2025"] = false;
schooltimes["12/30/2025"] = false;
schooltimes["12/31/2025"] = false;
    
schooltimes["01/01/2026"] = false;
schooltimes["01/02/2026"] = false;
schooltimes["01/03/2026"] = false;
schooltimes["01/04/2026"] = false;
schooltimes["01/05/2026"] = true;
schooltimes["01/06/2026"] = true;
schooltimes["01/07/2026"] = true;
schooltimes["01/08/2026"] = true;
schooltimes["01/09/2026"] = true;
schooltimes["01/10/2026"] = false;
schooltimes["01/11/2026"] = false;
schooltimes["01/12/2026"] = true;
schooltimes["01/13/2026"] = true;
schooltimes["01/14/2026"] = true;
schooltimes["01/15/2026"] = true;
schooltimes["01/16/2026"] = true;
schooltimes["01/17/2026"] = false;
schooltimes["01/18/2026"] = false;
schooltimes["01/19/2026"] = false;
schooltimes["01/20/2026"] = true;
schooltimes["01/21/2026"] = true;
schooltimes["01/22/2026"] = true;
schooltimes["01/23/2026"] = true;
schooltimes["01/24/2026"] = false;
schooltimes["01/25/2026"] = false;
schooltimes["01/26/2026"] = true;
schooltimes["01/27/2026"] = true;
schooltimes["01/28/2026"] = true;
schooltimes["01/29/2026"] = true;
schooltimes["01/30/2026"] = true;
schooltimes["01/31/2026"] = false;

schooltimes["02/01/2026"] = false;
schooltimes["02/02/2026"] = true;
schooltimes["02/03/2026"] = true;
schooltimes["02/04/2026"] = true;
schooltimes["02/05/2026"] = true;
schooltimes["02/06/2026"] = true;
schooltimes["02/07/2026"] = false;
schooltimes["02/08/2026"] = false;
schooltimes["02/09/2026"] = true;
schooltimes["02/10/2026"] = true;
schooltimes["02/11/2026"] = true;
schooltimes["02/12/2026"] = true;
schooltimes["02/13/2026"] = true;
schooltimes["02/14/2026"] = false;
schooltimes["02/15/2026"] = false;
schooltimes["02/16/2026"] = false;
schooltimes["02/17/2026"] = false;
schooltimes["02/18/2026"] = false;
schooltimes["02/19/2026"] = false;
schooltimes["02/20/2026"] = false;
schooltimes["02/21/2026"] = false;
schooltimes["02/22/2026"] = false;
schooltimes["02/23/2026"] = true;
schooltimes["02/24/2026"] = true;
schooltimes["02/25/2026"] = true;
schooltimes["02/26/2026"] = true;
schooltimes["02/27/2026"] = true;
schooltimes["02/28/2026"] = false;

schooltimes["03/01/2026"] = false;
schooltimes["03/02/2026"] = true;
schooltimes["03/03/2026"] = true;
schooltimes["03/04/2026"] = true;
schooltimes["03/05/2026"] = true;
schooltimes["03/06/2026"] = true;
schooltimes["03/07/2026"] = false;
schooltimes["03/08/2026"] = false;
schooltimes["03/09/2026"] = true;
schooltimes["03/10/2026"] = true;
schooltimes["03/11/2026"] = true;
schooltimes["03/12/2026"] = true;
schooltimes["03/13/2026"] = true;
schooltimes["03/14/2026"] = false;
schooltimes["03/15/2026"] = false;
schooltimes["03/16/2026"] = true;
schooltimes["03/17/2026"] = true;
schooltimes["03/18/2026"] = true;
schooltimes["03/19/2026"] = true;
schooltimes["03/20/2026"] = true;
schooltimes["03/21/2026"] = false;
schooltimes["03/22/2026"] = false;
schooltimes["03/23/2026"] = true;
schooltimes["03/24/2026"] = true;
schooltimes["03/25/2026"] = true;
schooltimes["03/26/2026"] = true;
schooltimes["03/27/2026"] = true;
schooltimes["03/28/2026"] = false;
schooltimes["03/29/2026"] = false;
schooltimes["03/30/2026"] = true;
schooltimes["03/31/2026"] = true;

schooltimes["04/01/2026"] = true;
schooltimes["04/02/2026"] = true;
schooltimes["04/03/2026"] = true;
schooltimes["04/04/2026"] = false;
schooltimes["04/05/2026"] = false;
schooltimes["04/06/2026"] = true;
schooltimes["04/07/2026"] = true;
schooltimes["04/08/2026"] = true;
schooltimes["04/09/2026"] = true;
schooltimes["04/10/2026"] = true;
schooltimes["04/11/2026"] = false;
schooltimes["04/12/2026"] = false;
schooltimes["04/13/2026"] = true;
schooltimes["04/14/2026"] = true;
schooltimes["04/15/2026"] = true;
schooltimes["04/16/2026"] = true;
schooltimes["04/17/2026"] = true;
schooltimes["04/18/2026"] = false;
schooltimes["04/19/2026"] = false;
schooltimes["04/20/2026"] = false;
schooltimes["04/21/2026"] = false;
schooltimes["04/22/2026"] = false;
schooltimes["04/23/2026"] = false;
schooltimes["04/24/2026"] = false;
schooltimes["04/25/2026"] = false;
schooltimes["04/26/2026"] = false;
schooltimes["04/27/2026"] = true;
schooltimes["04/28/2026"] = true;
schooltimes["04/29/2026"] = true;
schooltimes["04/30/2026"] = true;

schooltimes["05/01/2026"] = true;
schooltimes["05/02/2026"] = false;
schooltimes["05/03/2026"] = false;
schooltimes["05/04/2026"] = true;
schooltimes["05/05/2026"] = true;
schooltimes["05/06/2026"] = true;
schooltimes["05/07/2026"] = true;
schooltimes["05/08/2026"] = true;
schooltimes["05/09/2026"] = false;
schooltimes["05/10/2026"] = false;
schooltimes["05/11/2026"] = true;
schooltimes["05/12/2026"] = true;
schooltimes["05/13/2026"] = true;
schooltimes["05/14/2026"] = true;
schooltimes["05/15/2026"] = true;
schooltimes["05/16/2026"] = false;
schooltimes["05/17/2026"] = false;
schooltimes["05/18/2026"] = true;
schooltimes["05/19/2026"] = true;
schooltimes["05/20/2026"] = true;
schooltimes["05/21/2026"] = true;
schooltimes["05/22/2026"] = true;
schooltimes["05/23/2026"] = false;
schooltimes["05/24/2026"] = false;
schooltimes["05/25/2026"] = false;
schooltimes["05/26/2026"] = true;
schooltimes["05/27/2026"] = true;
schooltimes["05/28/2026"] = true;
schooltimes["05/29/2026"] = true;
schooltimes["05/30/2026"] = false;
schooltimes["05/31/2026"] = false;

schooltimes["06/01/2026"] = true;
schooltimes["06/02/2026"] = true;
schooltimes["06/03/2026"] = true;
schooltimes["06/04/2026"] = true;
schooltimes["06/05/2026"] = true;
schooltimes["06/06/2026"] = false;
schooltimes["06/07/2026"] = false;
schooltimes["06/08/2026"] = true;
schooltimes["06/09/2026"] = true;
schooltimes["06/10/2026"] = true;
schooltimes["06/11/2026"] = true;
schooltimes["06/12/2026"] = true;
schooltimes["06/13/2026"] = false;
schooltimes["06/14/2026"] = false;
schooltimes["06/15/2026"] = true;
schooltimes["06/16/2026"] = true;

// ===========================
// NORMAL SCHEDULE
// ===========================

var schedulenormal = new Object();

schedulenormal.A = new Object();
schedulenormal.A.start = "07:45";
schedulenormal.A.end   = "08:45";

schedulenormal.B = new Object();
schedulenormal.B.start = "08:48";
schedulenormal.B.end   = "09:48";

schedulenormal.C = new Object();
schedulenormal.C.start = "09:51";
schedulenormal.C.end   = "10:51";

schedulenormal.D = new Object();
schedulenormal.D.start = "10:54";
schedulenormal.D.end   = "12:24";

schedulenormal.E = new Object();
schedulenormal.E.start = "12:27";
schedulenormal.E.end   = "13:27";

schedulenormal.F = new Object();
schedulenormal.F.start = "13:30";
schedulenormal.F.end   = "14:30";


// ===========================
// LATE SCHEDULE
// ===========================

var schedulelate = new Object();

schedulelate.A = new Object();
schedulelate.A.start = "08:45";
schedulelate.A.end   = "09:33";

schedulelate.B = new Object();
schedulelate.B.start = "09:36";
schedulelate.B.end   = "10:24";

schedulelate.C = new Object();
schedulelate.C.start = "10:27";
schedulelate.C.end   = "11:15";

schedulelate.D = new Object();
schedulelate.D.start = "11:18";
schedulelate.D.end   = "12:48";

schedulelate.E = new Object();
schedulelate.E.start = "12:51";
schedulelate.E.end   = "13:39";

schedulelate.F = new Object();
schedulelate.F.start = "13:42";
schedulelate.F.end   = "14:30";


// ===========================
// NORMAL LUNCH
// ===========================

var lunchnormal = new Object();

lunchnormal["1"] = new Object();
lunchnormal["1"].start = "10:54";
lunchnormal["1"].end   = "11:24";

lunchnormal["2"] = new Object();
lunchnormal["2"].start = "11:24";
lunchnormal["2"].end   = "11:54";

lunchnormal["3"] = new Object();
lunchnormal["3"].start = "11:54";
lunchnormal["3"].end   = "12:24";

lunchnormal["4"] = new Object();
lunchnormal["4"].start = "12:27";
lunchnormal["4"].end   = "12:57";


// ===========================
// LATE LUNCH
// ===========================

var lunchlate = new Object();

lunchlate["1"] = new Object();
lunchlate["1"].start = "11:18";
lunchlate["1"].end   = "11:48";

lunchlate["2"] = new Object();
lunchlate["2"].start = "11:48";
lunchlate["2"].end   = "12:18";

lunchlate["3"] = new Object();
lunchlate["3"].start = "12:18";
lunchlate["3"].end   = "12:48";

lunchlate["4"] = new Object();
lunchlate["4"].start = "12:51";
lunchlate["4"].end   = "13:21";

document.onselectstart = function() { 
    return false; 
};

document.ondragstart = function() { 
    return false; 
};

document.oncontextmenu = function() { 
    return false; 
};

// GLOBAL STATE

var lunchSelection = 0;

// MOCK CONTROLS
var mockDate = ""; // MM/DD/YYYY
var mockTime = "";      // HH:MM

// OPERATIONS

function getNow() {
    if(mockDate === "" || mockTime === "") {
        return new Date();
    }

    var dParts = mockDate.split("/");
    var tParts = mockTime.split(":");

    return new Date(
        parseInt(dParts[2], 10),
        parseInt(dParts[0], 10) - 1,
        parseInt(dParts[1], 10),
        parseInt(tParts[0], 10),
        parseInt(tParts[1], 10),
        0,
        0
    );
}

function timeToMinutes(timeStr) {
    var parts = timeStr.split(":");
    return (parseInt(parts[0], 10) * 60) + parseInt(parts[1], 10);
}


/* ===========================
   LUNCH BUTTON UI
=========================== */

function setLunchPeriod(period) {
    lunchSelection = period;

    updateLunchButton(1);
    updateLunchButton(2);
    updateLunchButton(3);
    updateLunchButton(4);

    updateDisplay();
}

function updateLunchButton(num) {
    var el = document.getElementById("lunch" + num);
    var active = (lunchSelection === num);

    el.style.backgroundImage = active
        ? "url('button_out.gif')"
        : "url('button_in.gif')";

}


/* ===========================
   BLOCK CALCULATION
=========================== */

function getCurrentBlockAndTime(lunch, schedule, lunchSchedule) {
    var now = getNow();
    var currentMinutes = (now.getHours() * 60) + now.getMinutes();

    var block;
    for (block in schedule) {
        var start = timeToMinutes(schedule[block].start);
        var end = timeToMinutes(schedule[block].end);

        if (currentMinutes >= start && currentMinutes < end) {
            if (block === "D") {
            return handleDBlock(lunch, currentMinutes, start, end, lunchSchedule);
            }

            if (block === "E" && lunch === 4) {
                return handleELunch(currentMinutes, start, end, lunchSchedule);
            }

            return makeResult(
                block,
                end - currentMinutes,
                currentMinutes - start,
                end - start
            );
        }
    }

    return makeResult("Passing time", 0, 0, 0);
}

function handleDBlock(lunch, nowMin, start, end, lunchSchedule) {
    var ls, elapsed, total;

    if (lunch === 1) {
        ls = lunchSchedule[1];

        // During lunch
        if (nowMin < timeToMinutes(ls.end)) {
            elapsed = nowMin - timeToMinutes(ls.start);
            total = timeToMinutes(ls.end) - timeToMinutes(ls.start);
            return makeResult("Lunch", total - elapsed, elapsed, total);
        }

        // AFTER lunch → D block starts fresh here
        elapsed = nowMin - timeToMinutes(ls.end);
        total = end - timeToMinutes(ls.end);
        return makeResult("D", total - elapsed, elapsed, total);
    }


    if (lunch === 2) {
        ls = lunchSchedule[2];
        if (nowMin < timeToMinutes(ls.start)) {
            elapsed = nowMin - start;
            total = timeToMinutes(ls.start) - start;
            return makeResult("D1", total - elapsed, elapsed, total);
        }
        if (nowMin < timeToMinutes(ls.end)) {
            elapsed = nowMin - timeToMinutes(ls.start);
            total = timeToMinutes(ls.end) - timeToMinutes(ls.start);
            return makeResult("Lunch", total - elapsed, elapsed, total);
        }
        elapsed = nowMin - timeToMinutes(ls.end);
        total = end - timeToMinutes(ls.end);
        return makeResult("D2", total - elapsed, elapsed, total);
    }

    if (lunch === 3) {
        ls = lunchSchedule[3];
        if (nowMin >= timeToMinutes(ls.start)) {
            elapsed = nowMin - timeToMinutes(ls.start);
            total = timeToMinutes(ls.end) - timeToMinutes(ls.start);
            return makeResult("Lunch", total - elapsed, elapsed, total);
        }
        elapsed = nowMin - start;
        total = timeToMinutes(ls.start) - start;
        return makeResult("D", total - elapsed, elapsed, total);
    }

    elapsed = nowMin - start;
    total = end - start;
    return makeResult("D+", total - elapsed, elapsed, total);
}

function handleELunch(nowMin, start, end, lunchSchedule) {
    var ls = lunchSchedule[4];
    var elapsed, total;

    // First half of E → Lunch
    if (nowMin < timeToMinutes(ls.end)) {
        elapsed = nowMin - timeToMinutes(ls.start);
        total = timeToMinutes(ls.end) - timeToMinutes(ls.start);
        return makeResult("Lunch", total - elapsed, elapsed, total);
    }

    // After lunch → shortened E
    elapsed = nowMin - timeToMinutes(ls.end);
    total = end - timeToMinutes(ls.end);
    return makeResult("E", total - elapsed, elapsed, total);
}

function makeResult(block, remaining, elapsed, total) {
    return {
        currentBlock: block,
        timeRemaining: remaining,
        timeElapsed: elapsed,
        totalDuration: total
    };
}


// SCHOOL DAYS COUNT

function calculateSchoolDaysLeft() {
    var today = getNow();
    today.setHours(0, 0, 0, 0);

    var daysLeft = 0;
    var daysTotal = 0;
    var isTodaySchoolDay = false;

    var key;
    for (key in schooltimes) {
        var p = key.split("/");
        var d = new Date(
            parseInt(p[2], 10),
            parseInt(p[0], 10) - 1,
            parseInt(p[1], 10)
        );

        if (d.getFullYear() == today.getFullYear() && d.getMonth() == today.getMonth() && d.getDate() == today.getDate() ) {
            isTodaySchoolDay = schooltimes[key];
        }

        if(schooltimes[key]) {
            daysTotal++;
        }

        if (d >= today && schooltimes[key]) {
            daysLeft++;
        }
    }

    return {
        daysLeft: daysLeft,
        daysTotal: daysTotal,
        isTodaySchoolDay: isTodaySchoolDay
    };
}


/* ===========================
   DISPLAY UPDATE
=========================== */

function getEndTime(currentBlock, isLateDay, lunchSelection) {

    var scheduleUsed;
    var lunchUsed;
    var endTime = "";

    // Choose correct schedule
    if (isLateDay) {
        scheduleUsed = schedulelate;
        lunchUsed = lunchlate;
    } else {
        scheduleUsed = schedulenormal;
        lunchUsed = lunchnormal;
    }

    // Normal blocks A–F
    if (scheduleUsed[currentBlock]) {
        endTime = scheduleUsed[currentBlock].end;
    }

    // Lunch block
    if (currentBlock == "Lunch") {
        if (lunchSelection > 0) {
            endTime = lunchUsed[lunchSelection].end;
        }
    }

    // Special D variations
    if (currentBlock == "D1" || currentBlock == "D2" || currentBlock == "D+") {
        endTime = scheduleUsed["D"].end;
    }

    // Passing time
    if (currentBlock == "Passing time") {
        endTime = "";
    }

    if (endTime !== "") {
        var timeParts = endTime.split(":");
        var hours = parseInt(timeParts[0], 10);
        var minutes = timeParts[1];

        if (hours > 12) {
            hours -= 12;
        }

        endTime = hours + ":" + minutes;
    }

    return endTime;
}

function updateDisplay() {
    var now = getNow();
    var schoolInfo = calculateSchoolDaysLeft();

    document.getElementById("frame1").style.visibility = "hidden";
    document.getElementById("frame2").style.visibility = "hidden";
    document.getElementById("classinfotxt").innerHTML = "";
    document.getElementById("dayinfotxt").innerHTML = "";

    if(!schoolInfo.isTodaySchoolDay) {
        document.getElementById("classinfotxt").innerHTML = "There is no school today";
    } else {
        document.getElementById("frame2").style.visibility = "visible";
    }

    if (schoolInfo.isTodaySchoolDay && lunchSelection > 0) {
        document.getElementById("dayinfotxt").innerHTML = "Day Information";
        document.getElementById("classinfotxt").innerHTML = "Class Information";
        document.getElementById("frame1").style.visibility = "visible";
    }

    if (lunchSelection > 0) {
        var isLateDay = (now.getDay() === 3); // Wednesday

        var data = isLateDay
            ? getCurrentBlockAndTime(lunchSelection, schedulelate, lunchlate)
            : getCurrentBlockAndTime(lunchSelection, schedulenormal, lunchnormal);

        if (data.currentBlock !== "Passing time") {
            document.getElementById("blockd").innerHTML = data.currentBlock;
            var percent = data.totalDuration
                ? Math.round((data.timeElapsed / data.totalDuration) * 100)
                : 0;


            var endTime = getEndTime(data.currentBlock, isLateDay, lunchSelection);
            document.getElementById("classend").innerHTML = endTime;

            document.getElementById("minleft").innerHTML = data.timeRemaining;
            document.getElementById("classp").innerHTML = percent + "%";
            document.getElementById("cl1").innerHTML = data.timeElapsed;
            document.getElementById("cl2").innerHTML = data.totalDuration;

            document.getElementById("classprog").style.width = ((data.timeElapsed/data.totalDuration)*355)+"px";   
        } else {
            document.getElementById("blockd").innerHTML = "...";
            
            document.getElementById("classend").innerHTML ="";

            document.getElementById("minleft").innerHTML = "";
            document.getElementById("classp").innerHTML = "";
            document.getElementById("cl1").innerHTML = "";
            document.getElementById("cl2").innerHTML = "";

            document.getElementById("classprog").style.width = "0px";   

        }

        if(data.currentBlock == "Lunch") {
            document.getElementById("blockd").style.fontSize = "20px";
        } else {
            document.getElementById("blockd").style.fontSize = "36px";
        }
    }

    // year information

    var completed = schoolInfo.daysTotal - schoolInfo.daysLeft;
    var yearPercent = Math.round((completed / schoolInfo.daysTotal) * 100);

    document.getElementById("pr1").innerHTML = completed;
    document.getElementById("pr2").innerHTML = schoolInfo.daysTotal;
    document.getElementById("yearp").innerHTML = yearPercent + "%";
    document.getElementById("daysleft").innerHTML = schoolInfo.daysLeft;

    var quarter = 1;
    if (completed > 45) quarter = 2;
    if (completed > 90) quarter = 3;
    if (completed > 135) quarter = 4;

    var quarterStart = 0;

    if (quarter == 1) quarterStart = 0;
    if (quarter == 2) quarterStart = 45;
    if (quarter == 3) quarterStart = 90;
    if (quarter == 4) quarterStart = 135;

    var daysIntoQuarter = completed - quarterStart;

    if (daysIntoQuarter < 0) daysIntoQuarter = 0;
    if (daysIntoQuarter > 45) daysIntoQuarter = 45;

    var quarterPercent = Math.round((daysIntoQuarter / 45) * 100);

    document.getElementById("quartert").innerHTML = quarter;

    document.getElementById("completeq").innerHTML = quarterPercent + "%";

    document.getElementById("yearprog").style.width = ((completed/schoolInfo.daysTotal)*355)+"px";

    // year information senior

    var completed = (schoolInfo.daysTotal-18) - (schoolInfo.daysLeft-18);
    var yearPercent = Math.round((completed / (schoolInfo.daysTotal-18)) * 100);

    document.getElementById("pr1_sr").innerHTML = completed;
    document.getElementById("pr2_sr").innerHTML = (schoolInfo.daysTotal-18);
    document.getElementById("yearp_sr").innerHTML = yearPercent + "%";
    document.getElementById("daysleft_sr").innerHTML =(schoolInfo.daysLeft-18);

    document.getElementById("quartert_sr").innerHTML = quarter;
    document.getElementById("completeq_sr").innerHTML = quarterPercent + "%";
    document.getElementById("yearprog_sr").style.width = ((completed/(schoolInfo.daysTotal-18))*355)+"px";


    // day information

    var startTime;
    var endTime = "14:30";

    var isLateDay = (now.getDay() == 3);

    if (isLateDay) {
    startTime = "08:45";
    } else {
        startTime = "07:45";
    }

    var monthName = now.toString().split(" ")[1];

    document.getElementById("monthv").innerHTML = monthName;
    document.getElementById("dayv").innerHTML = now.getDate();

    var nowMin = (now.getHours() * 60) + now.getMinutes();
    var startMin = timeToMinutes(startTime);
    var endMin = timeToMinutes(endTime);

    if (nowMin < startMin) nowMin = startMin;
    if (nowMin > endMin) nowMin = endMin;

    var percentDay = Math.round(((nowMin - startMin) / (endMin - startMin)) * 100);

    if (percentDay < 0) percentDay = 0;
    if (percentDay > 100) percentDay = 100;

    document.getElementById("percent_day").innerHTML = percentDay + "%";

    var scheduleUsed;

    if (isLateDay) {
        scheduleUsed = schedulelate;
    } else {
        scheduleUsed = schedulenormal;
    }

    var completedBlocks = 0;
    var totalBlocks = 6;
    var block;

    for (block in scheduleUsed) {
        var blockEnd = timeToMinutes(scheduleUsed[block].end);

        if (nowMin >= blockEnd) {
            completedBlocks++;
        }
    }

    // Clamp values
    if (completedBlocks < 0) completedBlocks = 0;
    if (completedBlocks > 6) completedBlocks = 6;

    var blocksRemaining = totalBlocks - completedBlocks;

    document.getElementById("brem").innerHTML = blocksRemaining;
    document.getElementById("dayprog0").innerHTML = completedBlocks;
    document.getElementById("dayprog1").innerHTML = totalBlocks;

    document.getElementById("dayprog1").innerHTML = totalBlocks;
    
    document.getElementById("dayprog").style.width = ((percentDay)/100*355)+"px";

}


setInterval(updateDisplay, 1000);
updateDisplay();